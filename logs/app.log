{"time":"2025-05-06T21:00:22.729116477+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":38},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-06T21:00:22.732238421+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":54},"msg":"Database is connected"}
{"time":"2025-05-06T21:00:22.732419565+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-06T21:02:54.418576151+03:00","level":"ERROR","source":{"function":"medods-test/internal/storage/postgres.(*PostgreStorage).SaveTokenHash","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":98},"msg":"can't do query","err":"ERROR: null value in column \"guid\" of relation \"ref_tokens\" violates not-null constraint (SQLSTATE 23502)"}
{"time":"2025-05-06T21:02:54.418607463+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.(*PostgreStorage).SaveTokenHash","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":99},"msg":"can't do query","err":"ERROR: null value in column \"guid\" of relation \"ref_tokens\" violates not-null constraint (SQLSTATE 23502)","query":"\n\tINSERT INTO ref_tokens\n\t(token_hash) VALUES ($1) \n\t"}
{"time":"2025-05-06T21:02:54.418721169+03:00","level":"ERROR","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":99},"msg":"failed to save hash refresh token","requestID":"d848ef12-ea12-49a6-a702-fd739ef93473","error":"can't do query:ERROR: null value in column \"guid\" of relation \"ref_tokens\" violates not-null constraint (SQLSTATE 23502)"}
{"time":"2025-05-06T21:02:54.418750649+03:00","level":"DEBUG","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":101},"msg":"debug","requestID":"d848ef12-ea12-49a6-a702-fd739ef93473","guid":"a9c2f4c6-212c-4d3d-94df-f8e5855df92f"}
{"time":"2025-05-06T21:03:58.916567443+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-06T21:03:58.916790712+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-06T21:03:58.916811997+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
{"time":"2025-05-06T21:11:29.016588107+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":39},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-06T21:11:29.019716437+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":55},"msg":"Database is connected"}
{"time":"2025-05-06T21:11:29.019862839+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-06T21:12:11.245535038+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-06T21:12:11.245760408+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-06T21:12:11.245782053+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
{"time":"2025-05-06T21:50:04.139588526+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":39},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-06T21:50:04.14278878+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":55},"msg":"Database is connected"}
{"time":"2025-05-06T21:50:04.14294635+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-06T21:50:51.992705202+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-06T21:50:51.992890839+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-06T21:50:51.992923251+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
{"time":"2025-05-06T21:57:21.994940676+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":39},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-06T21:57:21.998216857+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":55},"msg":"Database is connected"}
{"time":"2025-05-06T21:57:21.998430992+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-06T21:58:21.400461492+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-06T21:58:21.400777374+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-06T21:58:21.400805905+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
{"time":"2025-05-06T21:58:22.642144593+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":39},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-06T21:58:22.645184755+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":55},"msg":"Database is connected"}
{"time":"2025-05-06T21:58:22.645340249+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-06T21:58:38.119467523+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-06T21:58:38.119643709+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-06T21:58:38.119655019+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
{"time":"2025-05-06T21:58:42.396329893+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":39},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-06T21:58:42.3996444+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":55},"msg":"Database is connected"}
{"time":"2025-05-06T21:58:42.399850086+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-06T21:59:30.584784551+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-06T21:59:30.584984944+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-06T21:59:30.585008186+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
{"time":"2025-05-06T22:47:34.102787361+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":39},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-06T22:47:34.106056106+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":55},"msg":"Database is connected"}
{"time":"2025-05-06T22:47:34.106307744+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-06T22:47:44.687019199+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-06T22:47:44.687180906+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-06T22:47:44.687196842+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
{"time":"2025-05-06T22:49:24.143638323+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":39},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-06T22:49:24.146745179+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":55},"msg":"Database is connected"}
{"time":"2025-05-06T22:49:24.146943132+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-06T22:50:30.345835074+03:00","level":"ERROR","source":{"function":"medods-test/internal/api.(*API).Endpoints.AuthMiddleware.func2","file":"/home/fzrdub/go/medods-test-task/internal/api/middlewares/auth/auth.go","line":31},"msg":"token verification failed","requestID":"aa0ab859-ef1e-45e3-bc06-49643b5031f9","error":"key is of invalid type"}
{"time":"2025-05-06T22:52:13.391780469+03:00","level":"ERROR","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":60},"msg":"invalid request","requestID":"bac93b2d-56c5-439b-99e6-453449367e27","err":"Key: 'Request.GUID' Error:Field validation for 'GUID' failed on the 'uuid' tag"}
{"time":"2025-05-06T22:52:22.01480168+03:00","level":"ERROR","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":60},"msg":"invalid request","requestID":"d68432cb-9519-4805-af4d-3047797adabe","err":"Key: 'Request.GUID' Error:Field validation for 'GUID' failed on the 'uuid' tag"}
{"time":"2025-05-06T22:53:32.732274206+03:00","level":"ERROR","source":{"function":"medods-test/internal/api.(*API).Endpoints.AuthMiddleware.func2","file":"/home/fzrdub/go/medods-test-task/internal/api/middlewares/auth/auth.go","line":31},"msg":"token verification failed","requestID":"d145089a-6ee0-4154-8404-443f939ec2f8","error":"key is of invalid type"}
{"time":"2025-05-06T22:54:16.16719763+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-06T22:54:16.167430197+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-06T22:54:16.167458354+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
{"time":"2025-05-07T11:10:50.154980697+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":39},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-07T11:10:50.158188945+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":55},"msg":"Database is connected"}
{"time":"2025-05-07T11:10:50.158413663+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-07T11:11:08.551402989+03:00","level":"ERROR","source":{"function":"medods-test/internal/storage/postgres.(*PostgreStorage).SaveUserInfo","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":103},"msg":"can't do query","err":"ERROR: duplicate key value violates unique constraint \"ref_tokens_guid_key\" (SQLSTATE 23505)"}
{"time":"2025-05-07T11:11:08.551434897+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.(*PostgreStorage).SaveUserInfo","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":104},"msg":"can't do query","err":"ERROR: duplicate key value violates unique constraint \"ref_tokens_guid_key\" (SQLSTATE 23505)","query":"\n\tINSERT INTO ref_tokens\n\t(guid, token_hash, user_agent_hash, ip_hash) VALUES ($1, $2, $3, $4) \n\t"}
{"time":"2025-05-07T11:11:08.55154006+03:00","level":"ERROR","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":125},"msg":"failed to save hash User Info","requestID":"10234368-5bc7-46b7-b593-c2f7e79dafdc","error":"can't do query:ERROR: duplicate key value violates unique constraint \"ref_tokens_guid_key\" (SQLSTATE 23505)"}
{"time":"2025-05-07T11:11:08.551573681+03:00","level":"DEBUG","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":127},"msg":"debug","requestID":"10234368-5bc7-46b7-b593-c2f7e79dafdc","guid":"421af6e3-c994-4aeb-99ae-6d750639e5bd"}
{"time":"2025-05-07T11:11:40.390127986+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-07T11:11:40.390318571+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-07T11:11:40.390343505+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
{"time":"2025-05-07T11:34:37.198659524+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":41},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-07T11:34:37.201915252+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":57},"msg":"Database is connected"}
{"time":"2025-05-07T11:34:37.202112583+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-07T11:34:39.504652222+03:00","level":"ERROR","source":{"function":"medods-test/internal/storage/postgres.(*PostgreStorage).SaveUserInfo","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":107},"msg":"GUID is already exists","err":"ERROR: duplicate key value violates unique constraint \"ref_tokens_guid_key\" (SQLSTATE 23505)"}
{"time":"2025-05-07T11:34:39.504688925+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.(*PostgreStorage).SaveUserInfo","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":108},"msg":"GUID is already exists","err":"ERROR: duplicate key value violates unique constraint \"ref_tokens_guid_key\" (SQLSTATE 23505)","query":"\n\tINSERT INTO ref_tokens\n\t(guid, token_hash, user_agent_hash, ip_hash) VALUES ($1, $2, $3, $4) \n\t"}
{"time":"2025-05-07T11:34:39.504829411+03:00","level":"ERROR","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":128},"msg":"GUID is already exists","requestID":"d40ae2b8-5400-444f-b3d7-17e1d7004331"}
{"time":"2025-05-07T11:34:39.504858687+03:00","level":"DEBUG","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":130},"msg":"debug","requestID":"d40ae2b8-5400-444f-b3d7-17e1d7004331","guid":"421af6e3-c994-4aeb-99ae-6d750639e5bd"}
{"time":"2025-05-07T11:34:39.504892749+03:00","level":"ERROR","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":135},"msg":"failed to save hash User Info","requestID":"d40ae2b8-5400-444f-b3d7-17e1d7004331","error":"GUID is already exists"}
{"time":"2025-05-07T11:34:39.504909758+03:00","level":"DEBUG","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":137},"msg":"debug","requestID":"d40ae2b8-5400-444f-b3d7-17e1d7004331","guid":"421af6e3-c994-4aeb-99ae-6d750639e5bd"}
{"time":"2025-05-07T11:34:51.624176136+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-07T11:34:51.624364687+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-07T11:34:51.624391265+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
{"time":"2025-05-07T11:34:52.858476648+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":41},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-07T11:34:52.861515698+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":57},"msg":"Database is connected"}
{"time":"2025-05-07T11:34:52.861701675+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-07T11:34:54.369266681+03:00","level":"ERROR","source":{"function":"medods-test/internal/storage/postgres.(*PostgreStorage).SaveUserInfo","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":107},"msg":"GUID is already exists","err":"ERROR: duplicate key value violates unique constraint \"ref_tokens_guid_key\" (SQLSTATE 23505)"}
{"time":"2025-05-07T11:34:54.369306639+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.(*PostgreStorage).SaveUserInfo","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":108},"msg":"GUID is already exists","err":"ERROR: duplicate key value violates unique constraint \"ref_tokens_guid_key\" (SQLSTATE 23505)","query":"\n\tINSERT INTO ref_tokens\n\t(guid, token_hash, user_agent_hash, ip_hash) VALUES ($1, $2, $3, $4) \n\t"}
{"time":"2025-05-07T11:34:54.369384023+03:00","level":"ERROR","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":128},"msg":"GUID is already exists","requestID":"689b9afb-8b62-4d69-a197-2350a00ea85c"}
{"time":"2025-05-07T11:34:54.369406872+03:00","level":"DEBUG","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":130},"msg":"debug","requestID":"689b9afb-8b62-4d69-a197-2350a00ea85c","guid":"421af6e3-c994-4aeb-99ae-6d750639e5bd"}
{"time":"2025-05-07T11:36:41.985958528+03:00","level":"ERROR","source":{"function":"medods-test/internal/storage/postgres.(*PostgreStorage).SaveUserInfo","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":107},"msg":"GUID is already exists","err":"ERROR: duplicate key value violates unique constraint \"ref_tokens_guid_key\" (SQLSTATE 23505)"}
{"time":"2025-05-07T11:36:41.98599056+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.(*PostgreStorage).SaveUserInfo","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":108},"msg":"GUID is already exists","err":"ERROR: duplicate key value violates unique constraint \"ref_tokens_guid_key\" (SQLSTATE 23505)","query":"\n\tINSERT INTO ref_tokens\n\t(guid, token_hash, user_agent_hash, ip_hash) VALUES ($1, $2, $3, $4) \n\t"}
{"time":"2025-05-07T11:36:41.986098513+03:00","level":"ERROR","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":128},"msg":"GUID is already exists","requestID":"eee54b38-532a-4df1-95cb-20e6739dd601"}
{"time":"2025-05-07T11:36:41.986114677+03:00","level":"DEBUG","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":130},"msg":"debug","requestID":"eee54b38-532a-4df1-95cb-20e6739dd601","guid":"421af6e3-c994-4aeb-99ae-6d750639e5bd"}
{"time":"2025-05-07T11:41:11.71175678+03:00","level":"ERROR","source":{"function":"medods-test/internal/storage/postgres.(*PostgreStorage).SaveUserInfo","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":107},"msg":"GUID is already exists","err":"ERROR: duplicate key value violates unique constraint \"ref_tokens_guid_key\" (SQLSTATE 23505)"}
{"time":"2025-05-07T11:41:11.711798174+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.(*PostgreStorage).SaveUserInfo","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":108},"msg":"GUID is already exists","err":"ERROR: duplicate key value violates unique constraint \"ref_tokens_guid_key\" (SQLSTATE 23505)","query":"\n\tINSERT INTO ref_tokens\n\t(guid, token_hash, user_agent_hash, ip_hash) VALUES ($1, $2, $3, $4) \n\t"}
{"time":"2025-05-07T11:41:11.711874939+03:00","level":"ERROR","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":128},"msg":"GUID is already exists","requestID":"562bd43f-dbee-44b9-9566-0ded9e306d58"}
{"time":"2025-05-07T11:41:11.711896727+03:00","level":"DEBUG","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":130},"msg":"debug","requestID":"562bd43f-dbee-44b9-9566-0ded9e306d58","guid":"421af6e3-c994-4aeb-99ae-6d750639e5bd"}
{"time":"2025-05-07T11:50:07.794024187+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-07T11:50:07.794335743+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-07T11:50:07.794360249+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
{"time":"2025-05-07T11:50:10.89083386+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":41},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-07T11:50:10.894402051+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":57},"msg":"Database is connected"}
{"time":"2025-05-07T11:50:10.894588732+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-07T11:50:41.455415195+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-07T11:50:41.455604887+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-07T11:50:41.455639784+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
{"time":"2025-05-07T11:51:18.77045466+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":41},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-07T11:51:18.773463358+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":57},"msg":"Database is connected"}
{"time":"2025-05-07T11:51:18.773644547+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-07T11:52:37.162597513+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-07T11:52:37.162813866+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-07T11:52:37.162834027+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
{"time":"2025-05-07T12:06:24.121060019+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":41},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-07T12:06:24.124031651+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":57},"msg":"Database is connected"}
{"time":"2025-05-07T12:06:24.124168363+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-07T12:09:27.754351149+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-07T12:09:27.754580096+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-07T12:09:27.75461145+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
{"time":"2025-05-07T12:09:31.985555168+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":41},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-07T12:09:31.988761757+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":57},"msg":"Database is connected"}
{"time":"2025-05-07T12:09:31.988952974+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-07T12:10:02.017025968+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-07T12:10:02.017197295+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-07T12:10:02.017209879+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
{"time":"2025-05-07T12:12:26.56384162+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":42},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-07T12:12:26.566845106+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":58},"msg":"Database is connected"}
{"time":"2025-05-07T12:12:26.566962769+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-07T12:12:38.916812451+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-07T12:12:38.916988234+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-07T12:12:38.917024212+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
