{"time":"2025-05-06T21:00:22.729116477+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":38},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-06T21:00:22.732238421+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":54},"msg":"Database is connected"}
{"time":"2025-05-06T21:00:22.732419565+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-06T21:02:54.418576151+03:00","level":"ERROR","source":{"function":"medods-test/internal/storage/postgres.(*PostgreStorage).SaveTokenHash","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":98},"msg":"can't do query","err":"ERROR: null value in column \"guid\" of relation \"ref_tokens\" violates not-null constraint (SQLSTATE 23502)"}
{"time":"2025-05-06T21:02:54.418607463+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.(*PostgreStorage).SaveTokenHash","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":99},"msg":"can't do query","err":"ERROR: null value in column \"guid\" of relation \"ref_tokens\" violates not-null constraint (SQLSTATE 23502)","query":"\n\tINSERT INTO ref_tokens\n\t(token_hash) VALUES ($1) \n\t"}
{"time":"2025-05-06T21:02:54.418721169+03:00","level":"ERROR","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":99},"msg":"failed to save hash refresh token","requestID":"d848ef12-ea12-49a6-a702-fd739ef93473","error":"can't do query:ERROR: null value in column \"guid\" of relation \"ref_tokens\" violates not-null constraint (SQLSTATE 23502)"}
{"time":"2025-05-06T21:02:54.418750649+03:00","level":"DEBUG","source":{"function":"medods-test/internal/api.(*API).Endpoints.New.func1","file":"/home/fzrdub/go/medods-test-task/internal/api/handlers/auth/token/tokens/token.go","line":101},"msg":"debug","requestID":"d848ef12-ea12-49a6-a702-fd739ef93473","guid":"a9c2f4c6-212c-4d3d-94df-f8e5855df92f"}
{"time":"2025-05-06T21:03:58.916567443+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-06T21:03:58.916790712+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-06T21:03:58.916811997+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
{"time":"2025-05-06T21:11:29.016588107+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":39},"msg":"Connecting to database","Connect String":"postgresql://postgres:qwerty@localhost:5432/test-task-db?sslmode=disable"}
{"time":"2025-05-06T21:11:29.019716437+03:00","level":"DEBUG","source":{"function":"medods-test/internal/storage/postgres.New","file":"/home/fzrdub/go/medods-test-task/internal/storage/postgres/postgres.go","line":55},"msg":"Database is connected"}
{"time":"2025-05-06T21:11:29.019862839+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":52},"msg":"Server is started","addres":"localhost:8080"}
{"time":"2025-05-06T21:12:11.245535038+03:00","level":"ERROR","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":60},"msg":"received signal, starting graceful shutdown","signal":2}
{"time":"2025-05-06T21:12:11.245760408+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":75},"msg":"Storage is closed. App is shuting down"}
{"time":"2025-05-06T21:12:11.245782053+03:00","level":"INFO","source":{"function":"main.main","file":"/home/fzrdub/go/medods-test-task/cmd/app/main.go","line":77},"msg":"shutdown completed"}
